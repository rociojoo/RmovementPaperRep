raw.text==loaded.text
loaded.text
raw.text
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
library(ggmap)
ggmap::geocode('waco texas',source = "dsk")
library(refsplitr)
sessionInfo()
sessionInfo()[[3]]
sessionInfo()[1]
sessionInfo()[3]
sessionInfo()[4]
sessionInfo()[5]
sessionInfo()[6]
sessionInfo()[7]
sessionInfo()
sessionInfo()[8]
d<-sessionInfo()
d$loadedOnly
d$loadedOnly$crayon
d$otherPkgs
d$otherPkgs$refsplitr
ggmap::geocode
library(ggmap)
d<-sessionInfo()
d
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(devtools)
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
sessionInfo()
library(ggmap)
ggmap::geocode('waco texas',source = "dsk")
sessionInfo()
uninstall(ggmaps)
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(devtools)
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
install.packages("ggmap")
ggmap::geocode('waco texas',source = "dsk")
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
ggmap::geocode('waco texas',source = "dsk")
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
install_github('dkahle/ggmap')
library(devtools)
install_github('dkahle/ggmap')
ggmap::geocode('waco texas',source = "dsk")
library(ggmap)
ggmap::geocode('waco texas',source = "dsk")
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
remove.packages("refsplitr", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
library(devtools)
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
devtools::document('/home/matt/Downloads/testr/refsplitr')
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
references<-references_read('/home/matt/Downloads/Ecology.txt')
authors<-authors_clean(references)
authors_georef(authors$prelim)
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
remove.packages("refnet", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
remove.packages("refsplitr", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
library(devtools)
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
library(refsplitr)
ggmap::geocode('waco texas',source = "dsk")
library(ggmap)
ggmap::geocode('waco texas',source = "dsk")
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
remove.packages("refsplitr", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
library(devtools)
install_local('/home/matt/Downloads/testr/refsplitr',force=TRUE)
references<-references_read('/home/matt/Downloads/Ecology.txt')
authors<-authors_clean(references)
authors_georef(authors$prelim)
library(refsplitr)
references<-references_read('/home/matt/Downloads/Ecology.txt')
authors<-authors_clean(references)
authors_georef(authors$prelim)
remove.packages('refsplitr','ggmap')
remove.packages('refsplittr','ggmap')
install_github('dkahle/ggmap')
library(devtools)
install_github('dkahle/ggmap')
remove.packages("ggmap", lib="~/R/x86_64-pc-linux-gnu-library/3.5")
library(tidyverse)
library(dplyr)
library(reshape)
library(RColorBrewer)
library(kableExtra)
setwd('~/r_programs/RmovementPaperRep/SurveyPosts')
data <- read.csv("survey_responses_20190130.csv",stringsAsFactors = FALSE)
metadata<-read.csv('../SuppMatt/RmovementPackagesMetadata.csv')
data_all <- data %>%
filter(completion == 100)
packages <- read_csv('packages_survey_names.csv')
data_question <- data_all[,grep("q1", colnames(data_all))]
colnames(data_question) <- t(packages)
# I'm dropping trajr that was added in the end and only got 1 response
data_question <- data_question[,-grep("trajr",colnames(data_question))]
packages_new <- packages[-which(packages=="trajr"),]
categories <- c("Never","Rarely","Sometimes","Often")
use_counts <- t(sapply(1:ncol(data_question),function(x){
data_line <- factor(data_question[,x],levels=categories)
count_p_use <- as.numeric(table(data_line))
return(count_p_use)
}))
use_counts<-data.frame(use_counts)
colnames(use_counts) <- categories
rownames(use_counts) <- t(packages_new)
use_counts$package<-row.names(use_counts)
use_counts<-merge(use_counts, metadata, by.x='package',by.y='Package',all.x=T)
table_out<-kable(use_counts[,1:length(categories)]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out2, 'usage_tbl')
library(tidyverse)
library(dplyr)
library(reshape)
library(RColorBrewer)
library(kableExtra)
setwd('~/r_programs/RmovementPaperRep/SurveyPosts')
data <- read.csv("survey_responses_20190130.csv",stringsAsFactors = FALSE)
metadata<-read.csv('../SuppMatt/RmovementPackagesMetadata.csv')
data_all <- data %>%
filter(completion == 100)
packages <- read_csv('packages_survey_names.csv')
data_question <- data_all[,grep("q1", colnames(data_all))]
colnames(data_question) <- t(packages)
# I'm dropping trajr that was added in the end and only got 1 response
data_question <- data_question[,-grep("trajr",colnames(data_question))]
packages_new <- packages[-which(packages=="trajr"),]
categories <- c("Never","Rarely","Sometimes","Often")
use_counts <- t(sapply(1:ncol(data_question),function(x){
data_line <- factor(data_question[,x],levels=categories)
count_p_use <- as.numeric(table(data_line))
return(count_p_use)
}))
use_counts<-data.frame(use_counts)
colnames(use_counts) <- categories
rownames(use_counts) <- t(packages_new)
use_counts$package<-row.names(use_counts)
use_counts<-merge(use_counts, metadata, by.x='package',by.y='Package',all.x=T)
table_out<-kable(use_counts[,1:length(categories)]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
table_out
library(tidyverse)
library(dplyr)
library(reshape)
library(RColorBrewer)
library(kableExtra)
setwd('~/r_programs/RmovementPaperRep/SurveyPosts')
data <- read.csv("survey_responses_20190130.csv",stringsAsFactors = FALSE)
metadata<-read.csv('../SuppMatt/RmovementPackagesMetadata.csv')
data_all <- data %>%
filter(completion == 100)
packages <- read_csv('packages_survey_names.csv')
data_question <- data_all[,grep("q1", colnames(data_all))]
colnames(data_question) <- t(packages)
# I'm dropping trajr that was added in the end and only got 1 response
data_question <- data_question[,-grep("trajr",colnames(data_question))]
packages_new <- packages[-which(packages=="trajr"),]
categories <- c("Never","Rarely","Sometimes","Often")
use_counts <- t(sapply(1:ncol(data_question),function(x){
data_line <- factor(data_question[,x],levels=categories)
count_p_use <- as.numeric(table(data_line))
return(count_p_use)
}))
use_counts<-data.frame(use_counts)
colnames(use_counts) <- categories
rownames(use_counts) <- t(packages_new)
use_counts$package<-row.names(use_counts)
use_counts<-merge(use_counts, metadata, by.x='package',by.y='Package',all.x=T)
table_out<-kable(use_counts[,1:length(categories)]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
table_out
use_counts
use_counts$package
View(metadata)
View(use_counts)
View(data)
use_counts$url
i<-1
use_counts$url[1]
grepl('cran',use_counts$url[1])
grepl('cran',use_counts$url[1:2])
grepl('cran',use_counts[,c('url','url2')])
grep('cran',use_counts[,c('url','url2')])
grepl('cran',use_counts[,c('url','url2')])
if(any(grepl('cran',use_counts[,c('url','url2')])))
use_counts[,c('url','url2')]
use_counts[i,c('url','url2')]
grepl('cran',use_counts[i,c('url','url2')])
grepl('cran',use_counts[i,c('url','url2')])
grepl('cran-r',use_counts[i,c('url','url2')])
grepl('cran-r',as.character(use_counts[i,c('url','url2')]))
grepl('cran-r',
grepl('cran-r','http://cran'
)
grepl('cran','http://cran'
)
grepl('cran','http://cran')
grepl('cran',use_counts[i,])
grepl('cran',c(use_counts[i,]))
grepl('cran',c(use_counts[i,'url']))
grepl('cran',as.character(c(use_counts[i,'url'])))
as.character(c(use_counts[i,'url']))
as.character(use_counts[i,'url'])
grepl('cran',as.character(use_counts[i,'url']))
grepl('cran',as.character(use_counts[i,c('url','url2'])))
if(grepl('cran',as.character(use_counts[i,c('url','url2')))){grepl('cran',use_counts[i,c('url','url2')]}
grepl('cran',as.character(use_counts[i,c('url','url2')]))
grepl('cran',as.character(use_counts[i,c('url')]))
grepl('cran',as.character(use_counts[i,c('url','url2')]))
as.character(use_counts[i,c('url','url2')])
use_counts$url<-as.character(use_count$url)
use_counts$url<-as.character(use_counts$url)
use_counts$url2<-as.character(use_counts$url2)
grepl('cran',use_counts[i,c('url','url2')])
gregexpr('cran',use_counts[i,c('url','url2')])
grep('cran',use_counts[i,c('url','url2')])
grepl('cran',use_counts[i,c('url','url2')])
any(grepl('cran',use_counts[i,c('url','url2')]))
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}
i<-1
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real
for(i in seq_along(use$counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
}
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$url_real
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
}
View(use_counts)
use_counts$link<-NA
paste0("<a href='", url_real,"'>", use_counts$package[i],"</a>")
use_counts$url_real
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("<a href='", url_real,"'>", use_counts$package[i],"</a>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
use_counts$
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts[,c('link','Never','Rarely','Sometimes','Often')]
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')])
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
#use_counts$
kable(use_counts[,c('package','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
kable(use_counts[,c('package','Never','Rarely','Sometimes','Often')])
#use_counts$
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')])
use_counts$url_real
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("\\<a href='", url_real,"'\\>", use_counts$package[i],"\\</a\\>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$url_real
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("\<a href='", url_real,"'\>", use_counts$package[i],"\</a\>")
#"<a href='url'>link text</a>"
}
use_counts$url_real
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("<a href='", url_real,"'>", use_counts$package[i],"</a>")
#"<a href='url'>link text</a>"
}
use_counts[1,]
use_counts$url_real
use_counts$link<-NA
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("\\<a href='", url_real,"'>", use_counts$package[i],"\\</a>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("<a href='", url_real,"'>", use_counts$package[i],"</a>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
use_counts
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$url_real<-paste0('[here](link)')
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$link<-paste0('[here](link)')
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$link<-paste0('[here](google.com)')
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
use_counts$url2<-as.character(use_counts$url2)
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("<a href='", url_real,"'>", use_counts$package[i],"</a>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$link<-paste0('[here](google.com)')
kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
#use_counts$link<-paste0('[here](google.com)')
table_out<-kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("\\<a href='", url_real,"'\\>", use_counts$package[i],"\\</a\\>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$link<-paste0('[here](google.com)')
table_out<-kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0("\\<a href='", url_real,"'\\>", use_counts$package[i],"\\</a\\>")
#"<a href='url'>link text</a>"
}
colnames(use_counts)
use_counts$link<-paste0('[here](www.google.com)')
table_out<-kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
paste0('[',use_counts$package[i],'](',url_real,')')
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0('[',use_counts$package[i],'](',url_real,')')
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$link<-paste0('[here](www.google.com)')
table_out<-kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
#use_counts$link<-paste0('[here](www.google.com)')
use_counts$package<-use_counts$link
table_out<-kable(use_counts[,c('link','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
table_out<-kable(use_counts[,c('package','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
write(table_out, 'usage_tbl')
table_out
table_out[1]
paste0("## Package Use\n table_out[1])
paste0("## Package Use", table_out[1],collapse='\n')
paste0("## Package Use", table_out[1],collapse='\\n')
paste0("## Package Use", table_out[1],collapse='butthole')
paste0("## Package Use", table_out,collapse='butthole')
paste0("## Package Use \n", table_out)
paste0("## Package Use \n ", table_out)
write(paste0("## Package Use \n ", table_out), 'usage_tbl')
write(paste0("## Package Use \n ", table_out), 'usage_tbl.html')
library(tidyverse)
library(dplyr)
library(reshape)
library(RColorBrewer)
library(kableExtra)
setwd('~/r_programs/RmovementPaperRep/SurveyPosts')
data <- read.csv("survey_responses_20190130.csv",stringsAsFactors = FALSE)
metadata<-read.csv('../SuppMatt/RmovementPackagesMetadata.csv')
data_all <- data %>%
filter(completion == 100)
packages <- read_csv('packages_survey_names.csv')
data_question <- data_all[,grep("q1", colnames(data_all))]
colnames(data_question) <- t(packages)
# I'm dropping trajr that was added in the end and only got 1 response
data_question <- data_question[,-grep("trajr",colnames(data_question))]
packages_new <- packages[-which(packages=="trajr"),]
categories <- c("Never","Rarely","Sometimes","Often")
use_counts <- t(sapply(1:ncol(data_question),function(x){
data_line <- factor(data_question[,x],levels=categories)
count_p_use <- as.numeric(table(data_line))
return(count_p_use)
}))
use_counts<-data.frame(use_counts)
colnames(use_counts) <- categories
rownames(use_counts) <- t(packages_new)
use_counts$package<-row.names(use_counts)
use_counts<-merge(use_counts, metadata, by.x='package',by.y='Package',all.x=T)
use_counts$url<-as.character(use_counts$url)
use_counts$url2<-as.character(use_counts$url2)
use_counts$url_real<-NA
use_counts$link<-NA
for(i in seq_along(use_counts$url)){
#i<-2
url_real<-use_counts$url[i]
if(any(grepl('cran',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('cran',use_counts[i,c('url','url2')])]}else
if(any(grepl('github',use_counts[i,c('url','url2')]))) { url_real<-use_counts[,c('url','url2')][i,grepl('github',use_counts[i,c('url','url2')])]}
use_counts$url_real[i]<-url_real
use_counts$link[i]<-paste0('[',use_counts$package[i],'](',url_real,')')
#"<a href='url'>link text</a>"
}
colnames(use_counts)
#use_counts$link<-paste0('[here](www.google.com)')
use_counts$package<-use_counts$link
kable(use_counts[,c('package','Never','Rarely','Sometimes','Often')]) %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```{r setup,message=FALSE}
